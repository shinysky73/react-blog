# PRD: 코드 품질 및 유지보수성 개선

## 1. 개요

**목표:** 애플리케이션의 코드 품질, 유지보수성 및 안정성을 향상시키기 위해 커스텀 훅(Custom Hooks)을 도입하고 전역 에러 처리 시스템을 구축합니다. 이 개선 작업은 향후 기능 확장과 개발 효율성 증대를 목표로 합니다.

## 2. 배경 및 문제점 (Rationale)

- **반복적인 로직:** 여러 컴포넌트에서 인증 상태(사용자 정보, 로그인 여부 등)를 확인하기 위해 `useAuthStore`를 직접 호출하고 있습니다. 이는 코드 중복을 유발하고, 향후 인증 로직 변경 시 여러 파일을 수정해야 하는 번거로움을 야기합니다.
- **UI 렌더링 오류 취약성:** 현재 애플리케이션은 특정 컴포넌트에서 렌더링 중 자바스크립트 오류가 발생하면 전체 애플리케이션이 중단(crash)될 수 있는 구조입니다. 이는 사용자 경험에 치명적입니다.

## 3. 기능 요구사항 (Functional Requirements)

### FR1: 인증 로직 추상화를 위한 `useAuth` 커스텀 훅
- **요구사항:**
    - 인증 관련 상태(user, token, isAuthenticated)와 기능(logout, checkAuth)을 제공하는 `useAuth` 커스텀 훅을 생성해야 합니다.
    - 이 훅은 내부적으로 `Zustand`의 `useAuthStore`를 사용하여 구현됩니다.
    - 기존에 `useAuthStore`를 직접 사용하던 컴포넌트들(예: `Layout.tsx`)은 새로 생성된 `useAuth` 훅을 사용하도록 리팩토링되어야 합니다.
- **목적:**
    - 인증 로직의 중앙 관리 및 재사용성 증대.
    - 컴포넌트와 상태 관리 라이브러리(Zustand) 간의 의존성 분리.

### FR2: 전역 에러 처리 시스템 구축
- **요구사항:**
    - React의 `Error Boundary` 개념을 사용하여 렌더링 오류를 처리하는 `ErrorBoundary` 컴포넌트를 생성해야 합니다.
    - `ErrorBoundary`는 오류 발생 시 사용자에게 친화적인 대체 UI를 보여주어야 합니다.
    - 대체 UI에는 "문제가 발생했습니다"와 같은 메시지와 함께 페이지를 새로고침하여 복구를 시도할 수 있는 버튼이 포함되어야 합니다.
    - 생성된 `ErrorBoundary`는 애플리케이션의 최상위 레벨(`main.tsx`)에 적용되어 모든 하위 컴포넌트의 렌더링 오류를 처리할 수 있어야 합니다.
- **목적:**
    - 특정 UI 컴포넌트의 오류가 전체 애플리케이션의 작동을 방해하지 않도록 격리.
    - 예기치 않은 UI 오류 발생 시 사용자 경험 저하 최소화.

## 4. 범위 (Scope)

### 포함되는 범위 (In Scope)
- `useAuth` 커스텀 훅 생성 및 적용.
- `ErrorBoundary` 컴포넌트 생성 및 전역 적용.

### 제외되는 범위 (Out of Scope)
- **`useFetchData` 커스텀 훅 생성:** 현재 프로젝트는 `TanStack/React-Query`를 통해 이미 효율적인 데이터 페칭, 캐싱, 서버 상태 관리를 수행하고 있습니다. 별도의 커스텀 훅을 만드는 것은 중복이며 `React-Query`의 이점을 활용하지 못하므로 의도적으로 제외합니다.
- **API 요청 실패에 대한 전역 처리:** `ErrorBoundary`는 렌더링 단계의 오류만 처리합니다. API 요청 실패는 `React-Query`의 `onError` 콜백이나 `axios` 인터셉터 등 비동기 로직 내에서 개별적으로 처리하는 현재 방식을 유지합니다.

## 5. 비기능 요구사항 (Non-Functional Requirements)

- **NFR1: 유지보수성:** 코드는 더 명확하고 이해하기 쉬워야 하며, 새로운 개발자가 인증 로직을 쉽게 파악하고 사용할 수 있어야 합니다.
- **NFR2: 개발자 경험:** 추상화된 훅을 통해 인증이 필요한 컴포넌트의 개발 속도를 높이고 잠재적인 버그를 줄입니다.
- **NFR3: 안정성:** `ErrorBoundary`를 통해 애플리케이션의 전반적인 안정성을 높이고, 오류 발생 시에도 사용자가 기본적인 조치를 취할 수 있도록 합니다.

## 6. 성공 지표

- 코드 리뷰 시 `useAuthStore`의 직접적인 사용이 줄어들고 `useAuth` 훅의 사용이 권장됨.
- UI 관련 오류가 발생하더라도 전체 앱이 중단되지 않고 `ErrorBoundary`의 대체 UI가 정상적으로 표시됨.
- 코드베이스에서 인증 관련 로직의 중복이 감소함.
